<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Example 1: Continuous Surrogate Marker â€¢ OptimalSurrogate</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Example 1: Continuous Surrogate Marker">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">OptimalSurrogate</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/example1.html">Continuous Surrogate Marker</a>
    </li>
    <li>
      <a href="../articles/example2.html">Discrete Surrogate Marker</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/celehs/OptimalSurrogate">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Example 1: Continuous Surrogate Marker</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/celehs/OptimalSurrogate/blob/master/vignettes/example1.Rmd"><code>vignettes/example1.Rmd</code></a></small>
      <div class="hidden name"><code>example1.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(OptimalSurrogate)</a></code></pre></div>
<p>Load data with a continuous surrogate marker. Take a look at first few and last few rows. Note that sob indicates the surrogate marker value, yob is the value of the primary outcome, and aob is the treatment indicator (0 or 1).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(marker_cont)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(marker_cont)</a></code></pre></div>
<pre><code>##        sob yob aob
## 1 1.661730   1   0
## 2 7.141513   0   0
## 3 3.889047   0   1
## 4 4.101624   1   0
## 5 7.770818   0   0
## 6 9.207453   1   1</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">tail</a></span>(marker_cont)</a></code></pre></div>
<pre><code>##           sob yob aob
## 995  6.353809   1   0
## 996  7.337931   0   1
## 997  4.519351   0   1
## 998  3.342114   0   0
## 999  8.015779   1   0
## 1000 7.085481   1   1</code></pre>
<p>Run function pte_cont which is the main function for a continuous surrogate marker. You must indicate which variable is the surrogate, primary outcome and treatment, whether standard error estimates are desired (var = TRUE), whether confidence intervals are desired (conf.int=TRUE), and the number of replications to be used for resampling (used to estimate variance and confidence intervals; default is 500).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.time">system.time</a></span>(out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/pte_cont.html">pte_cont</a></span>(</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  <span class="dt">sob =</span> marker_cont<span class="op">$</span>sob, </a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  <span class="dt">yob =</span> marker_cont<span class="op">$</span>yob, </a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  <span class="dt">aob =</span> marker_cont<span class="op">$</span>aob, </a>
<a class="sourceLine" id="cb6-6" data-line-number="6">  <span class="dt">var =</span> <span class="ot">TRUE</span>, <span class="dt">conf.int =</span> <span class="ot">TRUE</span>, <span class="dt">rep =</span> <span class="dv">1000</span>))</a></code></pre></div>
<pre><code>##    user  system elapsed 
##  11.229   1.044  12.541</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">out[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>##                 est         se      lower      upper
## delta    -0.2412751 0.03130459 -0.3026321 -0.1799181
## delta.gs -0.1597523 0.02009536 -0.1991392 -0.1203654
## pte1      0.6621168 0.05840355  0.5476459  0.7765878
## pte2      0.4927234 0.02680243  0.4401906  0.5452562</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">rownames</a></span>(out[[<span class="dv">2</span>]]))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(x, out[[<span class="dv">2</span>]][, <span class="st">"est"</span>], <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(out[[<span class="dv">2</span>]][, <span class="dv">-2</span>]), <span class="dt">type =</span> <span class="st">"l"</span>, </a>
<a class="sourceLine" id="cb10-3" data-line-number="3">     <span class="dt">las =</span> <span class="dv">1</span>, <span class="dt">xlab =</span> <span class="st">"Surrogate Marker"</span>, <span class="dt">ylab =</span> <span class="st">"Optimal Transformation"</span>)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">  <span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/lines">lines</a></span>(x, out[[<span class="dv">2</span>]][, <span class="st">"lower"</span>], <span class="dt">lty =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">  <span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/lines">lines</a></span>(x, out[[<span class="dv">2</span>]][, <span class="st">"upper"</span>], <span class="dt">lty =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="example1_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>The function outputs estimates (and standard error estimates and confidence intervals if indicated) of <span class="math inline">\(\Delta\)</span>, the true treatment effect; <span class="math inline">\(\Delta_{g_{opt}(S)}\)</span>, the treatment effect on the optimal transformation of the surrogate denoted as <span class="math inline">\(g_{opt}(S)\)</span>; <span class="math inline">\(PTE_1 =\Delta_{g_{opt}(S)} / \Delta\)</span>, a version of the proportion of treatment effect explained quantity based on the ratio between the treatment effect on the optimal transformation of the potential surrogate marker and the treatment effect on the primary outcome; and <span class="math inline">\(PTE_2\)</span> a version of the proportion of treatment effect explained quantity based on quantifying how well the individual-level treatment effect on the primary outcome can be approximated by the effect on the identified optimal transformation.</p>
<p>Here, the treatment effect is estimated to be -0.24, and the treatment effect on the optimal transformation of the surrogate is estimated to be -0.16. The resulting proportion of treatment effect estimates are 0.66 using <span class="math inline">\(PTE_1\)</span> and 0.49 using <span class="math inline">\(PTE_2\)</span>. These results indicate that this is a poor-to-moderate surrogate marker in this setting.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Xuan Wang, Layla Parast, Ming Yang, Lu Tian, Tianxi Cai.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
