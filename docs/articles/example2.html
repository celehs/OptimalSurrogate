<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Example 2: Discrete Surrogate Marker • OptimalSurrogate</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Example 2: Discrete Surrogate Marker">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">OptimalSurrogate</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>

  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Examples

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/example1.html">Continuous Surrogate Marker</a>
    </li>
    <li>
      <a href="../articles/example2.html">Discrete Surrogate Marker</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/celehs/OptimalSurrogate/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Example 2: Discrete Surrogate Marker</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/celehs/OptimalSurrogate/blob/HEAD/vignettes/example2.Rmd" class="external-link"><code>vignettes/example2.Rmd</code></a></small>
      <div class="hidden name"><code>example2.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://celehs.github.io/OptimalSurrogate" class="external-link">OptimalSurrogate</a></span><span class="op">)</span></span></code></pre></div>
<p>Load data with a discrete surrogate marker. Take a look at first few
and last few rows. Note that sob indicates the surrogate marker value,
yob is the value of the primary outcome, and aob is the treatment
indicator (0 or 1).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">marker_disc</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">marker_disc</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   sob yob aob</span></span>
<span><span class="co">## 1   4   1   1</span></span>
<span><span class="co">## 2   3   1   0</span></span>
<span><span class="co">## 3   4   0   1</span></span>
<span><span class="co">## 4   2   0   1</span></span>
<span><span class="co">## 5   2   0   0</span></span>
<span><span class="co">## 6   6   1   1</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">marker_disc</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##      sob yob aob</span></span>
<span><span class="co">## 995    2   1   0</span></span>
<span><span class="co">## 996    3   1   1</span></span>
<span><span class="co">## 997    6   1   1</span></span>
<span><span class="co">## 998    5   0   1</span></span>
<span><span class="co">## 999    5   0   1</span></span>
<span><span class="co">## 1000   4   1   1</span></span></code></pre>
<p>Run function pte_disc which is the main function for a discrete
surrogate marker. You must indicate which variable is the surrogate,
primary outcome and treatment, whether standard error estimates are
desired (var = TRUE), whether confidence intervals are desired
(conf.int=TRUE), and the number of replications to be used for
resampling (used to estimate variance and confidence intervals; default
is 500).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pte_disc.html">pte_disc</a></span><span class="op">(</span></span>
<span>  sob <span class="op">=</span> <span class="va">marker_disc</span><span class="op">$</span><span class="va">sob</span>, </span>
<span>  yob <span class="op">=</span> <span class="va">marker_disc</span><span class="op">$</span><span class="va">yob</span>, </span>
<span>  aob <span class="op">=</span> <span class="va">marker_disc</span><span class="op">$</span><span class="va">aob</span>, </span>
<span>  var <span class="op">=</span> <span class="cn">TRUE</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span>, rep <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    user  system elapsed </span></span>
<span><span class="co">##   4.755   0.612   5.396</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span></span></code></pre></div>
<pre><code><span><span class="co">## [[1]]</span></span>
<span><span class="co">##                 est         se      lower      upper</span></span>
<span><span class="co">## delta    -0.2001792 0.02971103 -0.2584128 -0.1419456</span></span>
<span><span class="co">## delta.gs -0.1074217 0.01549308 -0.1377882 -0.0770553</span></span>
<span><span class="co">## pte1      0.5366279 0.07128668  0.3969060  0.6763498</span></span>
<span><span class="co">## pte2      0.2993602 0.03030820  0.2399561  0.3587643</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">##         est         se     lower     upper</span></span>
<span><span class="co">## 1 0.8821713 0.06835341 0.7481986 1.0161439</span></span>
<span><span class="co">## 2 0.7657722 0.03888905 0.6895497 0.8419948</span></span>
<span><span class="co">## 3 0.5285443 0.03266675 0.4645175 0.5925712</span></span>
<span><span class="co">## 4 0.4388855 0.03118164 0.3777695 0.5000016</span></span>
<span><span class="co">## 5 0.3735158 0.03567187 0.3035989 0.4434327</span></span>
<span><span class="co">## 6 0.4684559 0.06706625 0.3370061 0.5999058</span></span></code></pre>
<p>The function outputs estimates (and standard error estimates and
confidence intervals if indicated) of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Δ</mi><annotation encoding="application/x-tex">\Delta</annotation></semantics></math>,
the true treatment effect;
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Δ</mi><mrow><msub><mi>g</mi><mrow><mi>o</mi><mi>p</mi><mi>t</mi></mrow></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>S</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><annotation encoding="application/x-tex">\Delta_{g_{opt}(S)}</annotation></semantics></math>,
the treatment effect on the optimal transformation of the surrogate
denoted as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mrow><mi>o</mi><mi>p</mi><mi>t</mi></mrow></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>S</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">g_{opt}(S)</annotation></semantics></math>;
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>T</mi><msub><mi>E</mi><mn>1</mn></msub><mo>=</mo><msub><mi>Δ</mi><mrow><msub><mi>g</mi><mrow><mi>o</mi><mi>p</mi><mi>t</mi></mrow></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>S</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><mi>/</mi><mi>Δ</mi></mrow><annotation encoding="application/x-tex">PTE_1 =\Delta_{g_{opt}(S)} / \Delta</annotation></semantics></math>,
a version of the proportion of treatment effect explained quantity based
on the ratio between the treatment effect on the optimal transformation
of the potential surrogate marker and the treatment effect on the
primary outcome; and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>T</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">PTE_2</annotation></semantics></math>
a version of the proportion of treatment effect explained quantity based
on quantifying how well the individual-level treatment effect on the
primary outcome can be approximated by the effect on the identified
optimal transformation.</p>
<p>Here, the treatment effect is estimated to be -0.20, and the
treatment effect on the optimal transformation of the surrogate is
estimated to be -0.11. The resulting proportion of treatment effect
estimates are 0.54 using
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>T</mi><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">PTE_1</annotation></semantics></math>
and 0.30 using
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>T</mi><msub><mi>E</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">PTE_2</annotation></semantics></math>.
These results indicate that this is a poor surrogate marker in this
setting.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Xuan Wang, Layla Parast, Lu Tian, Ming Yang, CELEHS Lab, PARSE Health.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
